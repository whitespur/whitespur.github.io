<!DOCTYPE html>
<html class="theme-next mist use-motion">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta http-equiv="Cache-Control" content="no-transform">
    <meta http-equiv="Cache-Control" content="no-siteapp">

    <link rel="shortcut icon" type="image/x-icon" href="../favicon.ico?v=0.5.0">
    <meta property="og:type" content="website">
    <meta property="og:title" content="遥望白鹿巷">
    <meta property="og:url" content="http://go2mars.top">
    <meta property="og:site_name" content="遥望白鹿巷">
    <meta property="og:description" content="">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="遥望白鹿巷">
    <meta name="twitter:description" content="">
    <title>Elasticsearch学习摘要一</title>

    <!-- Style Sheet-->
    <link href="../assets/vendors/fancybox/jquery.fancybox.css" rel="stylesheet" type="text/css">
    <link href="../assets/vendors/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="../assets/css/main.css" rel="stylesheet" type="text/css">
    <link href="../assets/vendors/highlight/css/github.css" rel="stylesheet">
    <script type="text/javascript" src="../assets/js/jquery.min.js"></script>
    <!-- End Style-->
    <style type="text/css">.fancybox-margin{margin-right:15px;}</style>

    <script type="text/javascript" id="hexo.configuration">
        var NexT = window.NexT || {};
        var CONFIG = {
            scheme: 'Mist',
            sidebar: {"position":"right","display":"post"},
            fancybox: true,
            motion: true
        };
    </script>
    <div style="display: none"><link rel="canonical" href="http://go2mars.top/todo-elasticsearchxue-xi-bi-ji/" />
    <meta name="referrer" content="origin" />
    
    <meta property="og:site_name" content="遥望白鹿巷" />
    <meta property="og:type" content="article" />
    <meta property="og:title" content="Elasticsearch学习摘要一" />
    <meta property="og:description" content="Elasticsearch 是一个分布式、可扩展、实时的搜索与数据分析引擎。 它能从项目一开始就赋予你的数据以搜索、分析和探索的能力，这是通常没有预料到的。 它存在还因为原始数据如果只是躺在磁盘里面根本就毫无用处。  https://www.elastic.co/guide/cn/elasticsearch/guide/current/index.html 中文wiki http://www.apache.wiki/display/Elasticsearch/Index 学习博客 http://www.cnblogs.com/xing901022/p/4704319.html 有赞 http://tech.youzan...." />
    <meta property="og:url" content="http://go2mars.top/todo-elasticsearchxue-xi-bi-ji/" />
    <meta property="article:published_time" content="2017-08-22T17:30:49.000Z" />
    <meta property="article:modified_time" content="2017-08-25T21:45:48.000Z" />
    <meta property="article:tag" content="Elasticsearch" />
    
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="Elasticsearch学习摘要一" />
    <meta name="twitter:description" content="Elasticsearch 是一个分布式、可扩展、实时的搜索与数据分析引擎。 它能从项目一开始就赋予你的数据以搜索、分析和探索的能力，这是通常没有预料到的。 它存在还因为原始数据如果只是躺在磁盘里面根本就毫无用处。  https://www.elastic.co/guide/cn/elasticsearch/guide/current/index.html 中文wiki http://www.apache.wiki/display/Elasticsearch/Index 学习博客 http://www.cnblogs.com/xing901022/p/4704319.html 有赞 http://tech.youzan...." />
    <meta name="twitter:url" content="http://go2mars.top/todo-elasticsearchxue-xi-bi-ji/" />
    
    <script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Article",
    "publisher": "遥望白鹿巷",
    "author": {
        "@type": "Person",
        "name": "whitespur",
        "url": "http://go2mars.top/author/whitespur",
        "sameAs": "http://go2mars.top",
        "description": "科技迷，兴趣点：elon musk个人及其相关公司（SpaceX,Tesla,Solar City)\n太空探索(火星殖民)，人工智能，科幻悬疑类影片，足球，热刺球迷"
    },
    "headline": "Elasticsearch学习摘要一",
    "url": "http://go2mars.top/todo-elasticsearchxue-xi-bi-ji/",
    "datePublished": "2017-08-22T17:30:49.000Z",
    "dateModified": "2017-08-25T21:45:48.000Z",
    "keywords": "Elasticsearch",
    "description": "Elasticsearch 是一个分布式、可扩展、实时的搜索与数据分析引擎。 它能从项目一开始就赋予你的数据以搜索、分析和探索的能力，这是通常没有预料到的。 它存在还因为原始数据如果只是躺在磁盘里面根本就毫无用处。  https://www.elastic.co/guide/cn/elasticsearch/guide/current/index.html 中文wiki http://www.apache.wiki/display/Elasticsearch/Index 学习博客 http://www.cnblogs.com/xing901022/p/4704319.html 有赞 http://tech.youzan...."
}
    </script>

    <script type="text/javascript" src="../shared/ghost-url.min.js"></script>
<script type="text/javascript">
ghost.init({
	clientId: "ghost-frontend",
	clientSecret: "1b3e089f4eb6"
});
</script>
    <meta name="generator" content="Ghost 0.7" />
    <link rel="alternate" type="application/rss+xml" title="遥望白鹿巷" href="http://go2mars.top/rss/" />
    <div id="site-config">
	{
	    "author_name": "遥望白鹿巷",
	    "links": [
	    {
	        "name": "openai",
	        "link": "https://openai.com/"
	    },
	    {
	        "name": "编程随想大神",
	        "link": "https://program-think.blogspot.com/"
	    },
	    {
	        "name": "机器学习课程",
	        "link": "https://www.coursera.org/learn/machine-learning/home/info"
	    }
	    ]
	}
	</div></div>


</head>

<script>
    var siteConfig = JSON.parse($("#site-config").html());
    var duoshuo_name = siteConfig.duoshuo_name;
    var author_name = siteConfig.author_name;
    var link_list = siteConfig.links;
</script>

<body class="post-template tag-elasticsearch">
<div class="container one-collumn sidebar-position-left page-home">
<div class="headband"></div>
    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
        <div class="header-inner"><div class="site-meta ">
            <div class="custom-logo-site-title">
                <a href="http://go2mars.top" class="brand" rel="start" >
                    <span class="logo-line-before "><i class=""></i></span>
                    <span class="site-title">遥望白鹿巷</span>
                    <span class="logo-line-after"><i class=""></i></span>
                </a>
            </div>
        </div>
            <div class="site-nav-toggle">
                <button>
                    <span class="btn-bar"></span>
                    <span class="btn-bar"></span>
                    <span class="btn-bar"></span>
                </button>
            </div>
            <nav class="site-nav">
                <ul id="menu" class="menu menu-left">
        <li class="menu-item menu-item-home menu-item-active nav-" role="presentation">
            <a href="https://whitespur.github.io" rel="section">
                <i class="menu-item-icon fa fa-home fa-fw"></i> <br>首页
            </a>
        </li>
        <li class="menu-item menu-item-home menu-item-active nav-" role="presentation">
            <a href="https://whitespur.github.io/records.html" rel="section">
                <i class="menu-item-icon fa fa-home fa-fw"></i> <br>归档
            </a>
        </li>
        <li class="menu-item menu-item-home menu-item-active nav-" role="presentation">
            <a href="https://whitespur.github.io/tags.html" rel="section">
                <i class="menu-item-icon fa fa-home fa-fw"></i> <br>标签
            </a>
        </li>
        <li class="menu-item menu-item-home menu-item-active nav-github" role="presentation">
            <a href="https://github.com/whitespur/" rel="section">
                <i class="menu-item-icon fa fa-home fa-fw"></i> <br>github
            </a>
        </li>
</ul>
                <div class="site-search">
                    <form class="site-search-form">
                        <input type="text" id="search-input" class="search-input default-search-input" autocomplete="off" autocorrect="off" autocapitalize="off">
                    </form>
                </div>
            </nav>
        </div>
    </header>
    <main id="main" class="main">
        <div class="main-inner ">
                <div class="content-wrap  page-post-detail">
        <div id="content" class="content">
            <div id="post" class="posts-expand fadeInDown">
                <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
                    <header class="post-header">
                        <h1 class="post-title" itemprop="name headline">Elasticsearch学习摘要一</h1>
                        <div class="post-meta">
                            <span class="post-time">
                                <span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span>
                                <span class="post-meta-item-text">发表于</span>
                                <time itemprop="dateCreated">2017-08-23</time>
                            </span>
                            <span class="post-category">&nbsp; | &nbsp;
                                <span class="post-meta-item-icon">
                                    <i class="fa fa-folder-o"></i>
                                </span>
                                <span class="post-meta-item-text">标签</span>
                                <span itemprop="about" itemscope="" itemtype="https://schema.org/Thing">
                                        <a href="../tag/elasticsearch/index.html">Elasticsearch</a>
                                </span>
                            </span>
                            <span class="post-comments-count">&nbsp; | &nbsp;
                                <a href="index.html#comments" itemprop="discussionUrl">
                                    <span class="post-comments-count ds-thread-count" data-thread-key="5" itemprop="commentsCount"></span>
                                </a>
                            </span>
                            <!--
             <span id="/blog/2016/05/09/flink-internals-understanding-execution-resources/" class="leancloud_visitors" data-flag-title="Flink 原理与实现：理解 Flink 中的计算资源">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count">173</span>
              </span> -->
                        </div>
                    </header>
                    <div class="post-body" itemprop="articleBody">
                        <p>Elasticsearch 是一个分布式、可扩展、实时的搜索与数据分析引擎。 它能从项目一开始就赋予你的数据以搜索、分析和探索的能力，这是通常没有预料到的。 它存在还因为原始数据如果只是躺在磁盘里面根本就毫无用处。 <br />
<a href="https://www.elastic.co/guide/cn/elasticsearch/guide/current/index.html">https://www.elastic.co/guide/cn/elasticsearch/guide/current/index.html</a></p>

<p>中文wiki
<a href="http://www.apache.wiki/display/Elasticsearch/Index">http://www.apache.wiki/display/Elasticsearch/Index</a></p>

<p>学习博客
<a href="http://www.cnblogs.com/xing901022/p/4704319.html">http://www.cnblogs.com/xing901022/p/4704319.html</a></p>

<p>有赞
<a href="http://tech.youzan.com/search-engine1/">http://tech.youzan.com/search-engine1/</a></p>

<p>安装使用</p>

<p><a href="https://www.elastic.co/downloads/elasticsearch">https://www.elastic.co/downloads/elasticsearch</a> <br />
./bin/elasticsearch
访问
<a href="http://localhost:9200/">http://localhost:9200/</a></p>

<p><a href="https://www.elastic.co/downloads/kibana">https://www.elastic.co/downloads/kibana</a> <br />
./bin/kibana
访问
<a href="http://localhost:5601/">http://localhost:5601/</a></p>

<p>bin/kibana plugin -i sense -u file:///PATH<em>TO</em>SENSE<em>TAR</em>FILE</p>

<p><a href="https://www.elastic.co/downloads/logstash">https://www.elastic.co/downloads/logstash</a> <br />
<a href="http://jaseywang.me/2012/12/26/logstash-%E5%88%9D%E4%BD%93%E9%AA%8C/">http://jaseywang.me/2012/12/26/logstash-%E5%88%9D%E4%BD%93%E9%AA%8C/</a> <br />
bin/logstash -f config/logstash-simple.conf </p>

<p>访问
<a href="http://localhost:9600/">http://localhost:9600/</a></p>

<p><a href="https://www.elastic.co/downloads/hadoop">https://www.elastic.co/downloads/hadoop</a> <br />
ES-Hadoop</p>

<p>mac安装elk <br />
<a href="http://blog.ywheel.cn/post/2017/03/04/setup">http://blog.ywheel.cn/post/2017/03/04/setup</a><em>elk</em>on_mac/</p>

<p>索引crud
<a href="http://www.apache.wiki/pages/viewpage.action?pageId=4260694">http://www.apache.wiki/pages/viewpage.action?pageId=4260694</a></p>

<p>kibana <br />
<a href="http://www.apache.wiki/pages/viewpage.action?pageId=8159567">http://www.apache.wiki/pages/viewpage.action?pageId=8159567</a></p>

<p>ES索引如何存储</p>

<p>集群健康状况
GET /_cluster/health</p>

<p>status 字段指示着当前集群在总体上是否工作正常。它的三种颜色含义如下： <br />
    green
    所有的主分片和副本分片都正常运行。
    yellow
    所有的主分片都正常运行，但不是所有的副本分片都正常运行。
    red
    有主分片没能正常运行。</p>

<pre><code>索引，分片
索引 —— 保存相关数据的地方。 索引实际上是指向一个或者多个物理 分片 的 逻辑命名空间 。
Elasticsearch 是利用分片将数据分发到集群内各处的。分片是数据的容器，文档保存在分片内，分片又被分配到集群内的各个节点里。 当你的集群规模扩大或者缩小时， Elasticsearch 会自动的在各节点中迁移分片，使得数据仍然均匀分布在集群里。
一个分片可以是 主 分片或者 副本 分片。 索引内任意一个文档都归属于一个主分片，所以主分片的数目决定着索引能够保存的最大数据量。
一个副本分片只是一个主分片的拷贝。 副本分片作为硬件故障时保护数据不丢失的冗余备份，并为搜索和返回文档等读操作提供服务。

通常情况下，我们使用的术语 对象 和 文档 是可以互相替换的。不过，有一个区别： 一个对象仅仅是类似于 hash 、 hashmap 、字典或者关联数组的 JSON 对象，对象中也可以嵌套其他的对象。 对象可能包含了另外一些对象。在 Elasticsearch 中，术语 文档 有着特定的含义。它是指最顶层或者根对象, 这个根对象被序列化成 JSON 并存储到 Elasticsearch 中，指定了唯一 ID。

一个文档不仅仅包含它的数据 ，也包含 元数据 —— 有关 文档的信息。 三个必须的元数据元素如下：
    _index
    文档在哪存放，一个 索引 应该是因共同的特性被分组到一起的文档集合
    _type
    文档表示的对象类别，数据可能在索引中只是松散的组合在一起，但是通常明确定义一些数据中的子分区是很有用的。 例如，所有的产品都放在一个索引中，但是你有许多不同的产品类别，比如 "electronics" 、 "kitchen" 和 "lawn-care"，这些文档共享一种相同的（或非常相似）的模式，一个 _type 命名可以是大写或者小写，但是不能以下划线或者句号开头，不应该包含逗号， 并且长度限制为256个字符
    _id
    文档唯一标识，ID 是一个字符串， 当它和 _index 以及 _type 组合就可以唯一确定 Elasticsearch 中的一个文档，要么提供自己的 _id ，要么让 Elasticsearch 帮你生成

创建文档api：
使用自定义id
PUT /{index}/{type}/{id}
</code></pre>

<p>{
  "field": "value",
  ...
}
    使用系统id
    POST /website/blog/
{
  "title": "My second blog entry",
  "text":  "Still trying this out...",
  "date":  "2014/01/01"
}</p>

<pre><code>取回文档api
GET /website/blog/123?pretty
返回文档的一部分
GET /website/blog/123?_source=title,text

更新整个文档
在 Elasticsearch 中文档是 不可改变 的，不能修改它们。 相反，如果想要更新现有的文档，需要 重建索引或者进行替换， 我们可以使用相同的 index API 进行实现,返回值增加了_version 字段值，created 标志设置成 false
PUT /customer/external/1
{
  "name": "John Doe",
  "sex":"male"
}
唯一的区别在于, update API 仅仅通过一个客户端请求来实现这些步骤，而不需要单独的 get 和 index请求
更新部分文档
POST /customer/external/1/_update
{
  "doc":{
    "age":"23"
  }
}

创建新文档
1使用系统id
POST /website/blog/
</code></pre>

<p>{ ... }
    2增加op<em>type=create
    PUT /website/blog/123?op</em>type=create
{ ... }
    3增加<em>create
    PUT /website/blog/123/</em>create
{ ... }</p>

<pre><code>删除文档 
语法和我们所知道的规则相同，只是 使用 DELETE 方法：
DELETE /website/blog/123

取回多个文档
mget API 要求有一个 docs 数组作为参数，每个 元素包含需要检索文档的元数据， 包括 _index 、 _type 和 _id 
GET /_mget
{
   "docs" : [
      {
         "_index" : "customer",
         "_type" :  "external",
         "_id" :    1
      },
      {
         "_index" : "customer",
         "_type" :  "external",
         "_id" :    2
      }
   ]
}
</code></pre>

<p>搜索
    空搜索,简单地返回集群中所有索引下的所有文档
    返回结果中最重要的部分是 hits ，它 包含 total 字段来表示匹配到的文档总数，并且一个 hits 数组包含所查询结果的前十个文档</p>

<pre><code>GET /_search
多索引，多类型
/gb,us/user,tweet/_search
在 gb 和 us 索引中搜索 user 和 tweet 类型
/_all/user,tweet/_search
在所有的索引中搜索 user 和 tweet 类型
分页
GET /_search?size=5&amp;from=5

有两种形式的 搜索 API：一种是 “轻量的” 查询字符串 版本，要求在查询字符串中传递所有的 参数，另一种是更完整的 请求体 版本，要求使用 JSON 格式和更丰富的查询表达式作为搜索语言。
简易 查询 —query-string search— 对于用命令行进行点对点（ad-hoc）查询是非常有用
查询在 tweet 类型中 tweet 字段包含 elasticsearch 单词的所有文档：
GET /_all/tweet/_search?q=tweet:elasticsearch

这个简单搜索返回包含 mary 的所有文档

GET /_search?q=mary

当索引一个文档的时候，Elasticsearch 取出所有字段的值拼接成一个大的字符串，作为 _all 字段进行索引
除非设置特定字段，否则查询字符串就使用 _all 字段进行搜索。

查看某个索引／类型的映射
GET /customer/_mapping/external
这个响应告诉我们 date 字段被认为是 date 类型的。由于 _all 是默认字段，所以没有提及它。但是我们知道 _all 字段是 string 类型的。
所以 date 字段和 string 字段 索引方式不同，因此搜索结果也不一样
到目前为止，最大的差异在于 代表 精确值 （它包括 string 字段）的字段和代表 全文 的字段。这个区别非常重要——它将搜索引擎和所有其他数据库区别开来。

Elasticsearch 中的数据可以概括的分为两类：精确值和全文
我们很少对全文类型的域做精确匹配。相反，我们希望在文本类型的域中搜索。不仅如此，我们还希望搜索能够理解我们的 意图 ：
• 搜索 UK ，会返回包含 United Kindom 的文档。
• 搜索 jump ，会匹配 jumped ， jumps ， jumping ，甚至是 leap 。
• 搜索 johnny walker 会匹配 Johnnie Walker ， johnnie depp 应该匹配 Johnny Depp 。
• fox news hunting 应该返回福克斯新闻（ Foxs News ）中关于狩猎的故事，同时， fox hunting news 应该返回关于猎狐的故事。
为了促进这类在全文域中的查询，Elasticsearch 首先 分析 文档，之后根据结果创建 
倒排索引
一个倒排索引由文档中所有不重复词的列表构成，对于其中每个词，有一个包含它的文档列表。
索引文本和查询字符串必须标准化为相同的格式。
将所有文档的信息写入到倒排索引（Inverted Index）的数据结构中，倒排索引建立的是索引中词和文档之间的映射关系，在倒排索引中，数据是面向词（Term）而不是面向文档的。
在Elasticsearch中，文档归属于一种类型(type),而这些类型存在于索引(index)中，我们可以画一些简单的对比图来类比传统关系型数据库：
Relational DB -&gt; Databases -&gt; Tables -&gt; Rows -&gt; Columns
</code></pre>

<p>Elasticsearch -> Indices   -> Types  -> Documents -> Fields <br />
    Elasticsearch集群可以包含多个索引(indices)（数据库），每一个索引可以包含多个类型(types)（表），每一个类型包含多个文档(documents)（行），然后每个文档包含多个字段(Fields)（列）。
    「索引」含义的区分
    你可能已经注意到索引(index)这个词在Elasticsearch中有着不同的含义，所以有必要在此做一下区分:
    • 索引（名词） 如上文所述，一个索引(index)就像是传统关系数据库中的数据库，它是相关文档存储的地方，index的复数是indices 或indexes。
    • 索引（动词） 「索引一个文档」表示把一个文档存储到索引（名词）里，以便它可以被检索或者查询。这很像SQL中的INSERT关键字，差别是，如果文档已经存在，新的文档将覆盖旧的文档。
    • 倒排索引 传统数据库为特定列增加一个索引，例如B-Tree索引来加速检索。Elasticsearch和Lucene使用一种叫做倒排索引(inverted index)的数据结构来达到相同目的。
    默认情况下，文档中的所有字段都会被索引（拥有一个倒排索引），只有这样他们才是可被搜索的。
    分析与分析器
    分析 包含下面的过程：
    • 首先，将一块文本分成适合于倒排索引的独立的 词条 ，
    • 之后，将这些词条统一化为标准格式以提高它们的“可搜索性”，或者 recall
    • 字符过滤器，分词器，Token 过滤器
    • 当你查询一个 全文 域时， 会对查询字符串应用相同的分析器，以产生正确的搜索词条列表。
    • 当你查询一个 精确值 域时，不会分析查询字符串， 而是搜索你指定的精确值。
    • 测试分析器
    GET /<em>analyze
{
  "analyzer": "standard",
  "text": "Text to analyze"
}
    映射
    为了能够将时间域视为时间，数字域视为数字，字符串域视为全文或精确值字符串， Elasticsearch 需要知道每个域中数据的类型。这个信息包含在映射中。
    Elasticsearch 支持 如下简单域类型：
    • 字符串: string
    • 整数 : byte, short, integer, long
    • 浮点数: float, double
    • 布尔型: boolean
    • 日期: date
    默认， string 类型域会被认为包含全文。就是说，它们的值在索引前，会通过 一个分析器，针对于这个域的查询在搜索前也会经过一个分析器。
    string 域映射的两个最重要 属性是 index 和 analyzer 。index 属性控制怎样索引字符串。它可以是下面三个值：
    analyzed首先分析字符串，然后索引它。换句话说，以全文索引这个域。
    not</em>analyzed索引这个域，所以可以搜索到它，但索引指定的精确值。不对它进行分析。
    no不索引这个域。这个域不会被搜索到。
    <a href="https://elasticsearch.cn/book/elasticsearch">https://elasticsearch.cn/book/elasticsearch</a><em>definitive</em>guide<em>2.x/mapping-intro.html#</em>查看映射</p>

<pre><code>请求体查询 —下文简称 查询—不仅可以处理自身的查询请求，还允许你对结果进行片段强调（高亮）、对所有或部分结果进行聚合分析，同时还可以给出 你是不是想找 的建议，这些建议可以引导使用者快速找到他想要的结果。
GET /_search
</code></pre>

<p>{}
    GET /index<em>2014*/type1,type2/</em>search
{}
    GET /<em>search
{
  "from": 30,
  "size": 10
}
    查询表达式(Query DSL)
    一个查询语句 的典型结构：
    {
    QUERY</em>NAME: {
        ARGUMENT: VALUE,
        ARGUMENT: VALUE,...
    }
}
    如果是针对某个字段，那么它的结构如下：
    {
    QUERY<em>NAME: {
        FIELD</em>NAME: {
            ARGUMENT: VALUE,
            ARGUMENT: VALUE,...
        }
    }
}</p>

<pre><code>GET /_search
</code></pre>

<p>{
    "query": {
        "match": {
            "tweet": "elasticsearch"
        }
    }
}</p>

<pre><code>最重要的几个查询
https://elasticsearch.cn/book/elasticsearch_definitive_guide_2.x/_most_important_queries.html

排序
默认情况下，返回的结果是按照 相关性 进行排序的——最相关的文档排在最前
为了按照相关性来排序，需要将相关性表示为一个数值。在 Elasticsearch 中， 相关性得分 由一个浮点数进行表示，并在搜索结果中通过 _score 参数返回， 默认排序是 _score 降序
通过sort参数按照指定字段排序
"sort": { "date": { "order": "desc" }}
</code></pre>
                    </div>
                </article>
            </div>
        </div>
        <div class="comments" id="comments">
            <!-- 页面绑定 - 请勿改动 -->
            <div class="ds-thread" data-thread-key="5" data-title="Elasticsearch学习摘要一" data-url="http://go2mars.top/todo-elasticsearchxue-xi-bi-ji/"></div>
            <!-- 结束绑定 -->

            <!-- 不必修改下述代码，在head inject中添加配置即可 -->
            <script type="text/javascript">
                var duoshuoQuery = {short_name:duoshuo_name};
                (function() {
                    var ds = document.createElement('script');
                    ds.type = 'text/javascript';ds.async = true;
                    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
                    ds.charset = 'UTF-8';
                    (document.getElementsByTagName('head')[0]
                    || document.getElementsByTagName('body')[0]).appendChild(ds);
                })();
            </script>
            <!-- 结束替换位置 -->

        </div>
    </div>
<div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
        <span class="sidebar-toggle-line sidebar-toggle-line-first" style="background: #87daff;"></span>
        <span class="sidebar-toggle-line sidebar-toggle-line-middle" style="background: #87daff;"></span>
        <span class="sidebar-toggle-line sidebar-toggle-line-last" style="background: #87daff;"></span>
    </div>
</div>

<aside id="sidebar" class="sidebar page-post-detail">
    <div class="sidebar-inner">
        <ul class="sidebar-nav motion-element">
            <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
                文章目录
            </li>
            <li class="sidebar-nav-overview" data-target="site-overview">
                站点概览
            </li>
        </ul>
                <section class="site-overview sidebar-panel" style="display: block;">
            <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
                <img class="site-author-image" itemprop="image" src="index.html" alt="遥望白鹿巷">
                <p class="site-author-name" id="site-author-name" itemprop="name"></p>
                <p class="site-description motion-element" itemprop="description" >哪来的天才</p>
            </div>
            <nav class="site-state motion-element" >
                <div class="site-state-item site-state-posts">
                    <a href="../records">
                        <span class="site-state-item-count">
                                32
                        </span>
                        <span class="site-state-item-name">文章</span>
                    </a>
                </div>
                <!-- <div class="site-state-item site-state-categories">
      <a href="/categories">
        <span class="site-state-item-count">11</span>
        <span class="site-state-item-name">分类</span>
      </a>
    </div>-->
                <div class="site-state-item site-state-categories">
                    <a href="../tags">
                        <span class="site-state-item-count">
                                75
                        </span>
                        <span class="site-state-item-name">标签</span>
                    </a>
                </div>
                <!--
                <div class="site-state-item site-state-tags">
                    <a href="/tags">
                        <span class="site-state-item-count">62</span>
                        <span class="site-state-item-name">标签</span>
                    </a>
                </div>-->
            </nav>
            <div class="feed-link motion-element" >
                <a href="../rss" rel="alternate"><i class="fa fa-rss"></i>RSS</a>
            </div>
            <div class="links-of-author motion-element" >
            </div>
            <div class="links-of-author motion-element" id="site-links">
                <p class="site-author-name">友情链接</p>

                <!--友情链接位置，在后台修改head inject配置即可-->

            </div>
        </section>
<script>
    $("#site-author-name").html(author_name);
    var i = 0;
    for (i = 0; i < link_list.length; i++)
    {
        $("#site-links").html($("#site-links").html() + '<span class="links-of-author-item">' +
                '<a href="http://localhost:2368/todo-elasticsearchxue-xi-bi-ji/'&#32;+&#32;link_list[i].link&#32;+&#32;'" target="_blank">' +
                link_list[i].name +
                '</a></span>');
    }
</script>        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
            <div class="post-toc-indicator-top post-toc-indicator">
                <i class="fa fa-angle-double-up"></i>
            </div>
            <div class="post-toc">
                <div class="post-toc-content"><ol class="nav" id="category_nav">
                </ol></div>
            </div>
            <div class="post-toc-indicator-bottom post-toc-indicator">
                <i class="fa fa-angle-double-down"></i>
            </div>
        </section>
    </div>
</aside>
<script type="text/javascript">
    $(".site-overview").css("display","none");
    if ($("#content h2").length > 0) {
        $("#content h2").each(function () {
            $(this).attr("id", $(this).html().replace(/ +/g, '-').replace(/<(\/a|a).*>/g, ""));
            $("#category_nav").html($("#category_nav").html() + '<li class="nav-item nav-level-2"><a class="nav-link" href="index.html#' + $(this).html().replace(/ +/g, '-').replace(/<(\/a|a).*>/g, "") + '"><span class="nav-text">' + $(this).html().replace(/<(\/a|a).*>/g, "") + '</span></a></li>');
        });
    } else {
        $("#category_nav").html($("#category_nav").html() + '<span class="nav-text">暂无目录</span>');
    }
</script>

        </div>
    </main>

    <footer id="footer" class="footer">
        <div class="footer-inner">
            <div class="ghost-footer">
                
            </div>
            <div class="powered-by">
                Powered&nbsp;by&nbsp;<a class="theme-link" href="http://ghost.org">Ghost</a>
            </div>
            <div class="theme-info">
                Theme&nbsp;-&nbsp;<a class="theme-link" href="https://github.com/microud/ghost-theme-next">NexT.Mist</a>
            </div>
        </div>
    </footer>
    <div class="back-to-top"></div>
</div>

<script>
$("#search-input").keypress(function(key){
    if (key.keyCode == 13)
    {
        window.open("/search/?keyword=" + $(this).val(), "_blank");
    }

});


</script>
<script type="text/javascript" src="../assets/vendors/velocity/velocity.min.js"></script>
<script type="text/javascript" src="../assets/vendors/velocity/velocity.ui.min.js"></script>
<script type="text/javascript" src="../assets/vendors/fastclick/lib/fastclick.min.js"></script>
<script type="text/javascript" src="../assets/vendors/jquery_lazyload/jquery.lazyload.js"></script>
<script type="text/javascript" src="../assets/vendors/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript" src="../assets/vendors/ua-parser-js/ua-parser.pack.js"></script>
<script type="text/javascript" src="../assets/vendors/highlight/script/highlight.pack.js"></script>

<script type="text/javascript" src="../assets/js/motion.js"></script>
<script type="text/javascript" src="../assets/js/utils.js"></script>
<script type="text/javascript" src="../assets/js/affix.js"></script>
<script type="text/javascript" src="../assets/js/post-details.js"></script>
<script type="text/javascript" src="../assets/js/scrollspy.js"></script>

<script type="text/javascript" src="../assets/js/bootstrap.js"></script>

<script>
    hljs.initHighlightingOnLoad();
</script>

</body>
</html>